"use strict";(self.webpackChunkrevyos_docs_new=self.webpackChunkrevyos_docs_new||[]).push([[9630],{1540:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>l,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"build/other/thead-qemu\u7f16\u8bd1\u6d41\u7a0b","title":"T-Head QEMU Compilation Process","description":"C910V forced CPU specification patch","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/build/other/thead-qemu\u7f16\u8bd1\u6d41\u7a0b.md","sourceDirName":"build/other","slug":"/build/other/thead-qemu\u7f16\u8bd1\u6d41\u7a0b","permalink":"/revyos-docs-new/en/docs/build/other/thead-qemu\u7f16\u8bd1\u6d41\u7a0b","draft":false,"unlisted":false,"editUrl":"https://github.com/kagura114/revyos-docs-new/tree/main/docs/build/other/thead-qemu\u7f16\u8bd1\u6d41\u7a0b.md","tags":[],"version":"current","frontMatter":{},"sidebar":"documentSidebar","previous":{"title":"Manuel Build Kernel","permalink":"/revyos-docs-new/en/docs/build/other/manuel_build_kernel"},"next":{"title":"GStreamer Player Porting","permalink":"/revyos-docs-new/en/docs/adaptation/GStreamer\u64ad\u653e\u5668\u9002\u914d"}}');var s=t(4848),i=t(8453);const a={},c="T-Head QEMU Compilation Process",o={},d=[];function u(e){const n={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"t-head-qemu-compilation-process",children:"T-Head QEMU Compilation Process"})}),"\n",(0,s.jsx)(n.p,{children:"C910V forced CPU specification patch"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-patch",children:'From 5164bca5a4bcde4534dc1a9aa3a7f619719874cf Mon Sep 17 00:00:00 2001\nFrom: Han Gao <gaohan@iscas.ac.cn>\nDate: Sun, 23 Apr 2023 22:11:35 +0800\nSubject: [PATCH] qemu-user-riscv64 default cpu is c910v\n\nSigned-off-by: Han Gao <gaohan@iscas.ac.cn>\n---\n linux-user/riscv/target_elf.h | 4 ++--\n 1 file changed, 2 insertions(+), 2 deletions(-)\n\ndiff --git a/linux-user/riscv/target_elf.h b/linux-user/riscv/target_elf.h\nindex 9dd65652ee45..3195cfa71408 100644\n--- a/linux-user/riscv/target_elf.h\n+++ b/linux-user/riscv/target_elf.h\n@@ -9,7 +9,7 @@\n #define RISCV_TARGET_ELF_H\n static inline const char *cpu_get_model(uint32_t eflags)\n {\n-    /* TYPE_RISCV_CPU_ANY */\n-    return "any";\n+    /* TYPE_RISCV_CPU_C910V */\n+    return "c910v";\n }\n #endif\n'})}),"\n",(0,s.jsx)(n.p,{children:"Compilation process"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"./configure \\\n  --prefix=$HOME/qemu-install \\\n  --static \\\n  --target-list=riscv64-linux-user \\\n  --disable-system \\\n  --disable-pie \\\n  --interp-prefix=/etc/qemu-binfmt/%M\n\nmake -j20\n"})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var r=t(6540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);