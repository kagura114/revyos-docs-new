"use strict";(self.webpackChunkrevyos_docs_new=self.webpackChunkrevyos_docs_new||[]).push([[7414],{7617:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"benchmark/stream","title":"Stream","description":"\u4f7f\u7528\u8bf4\u660e","source":"@site/docs/benchmark/stream.md","sourceDirName":"benchmark","slug":"/benchmark/stream","permalink":"/revyos-docs-new/docs/benchmark/stream","draft":false,"unlisted":false,"editUrl":"https://github.com/kagura114/revyos-docs-new/docs/benchmark/stream.md","tags":[],"version":"current","frontMatter":{},"sidebar":"documentSidebar","previous":{"title":"\u91cd\u542f\u6d4b\u8bd5","permalink":"/revyos-docs-new/docs/benchmark/reboot"},"next":{"title":"\u955c\u50cf\u5237\u5199\u9700\u77e5","permalink":"/revyos-docs-new/docs/Installation/intro"}}');var s=r(4848),o=r(8453);const i={},c="Stream",a={},l=[{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"stream",children:"Stream"})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f7f\u7528\u8bf4\u660e",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,s.jsx)(n.p,{children:"STREAM \u57fa\u51c6\u6d4b\u8bd5\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u7efc\u5408\u57fa\u51c6\u6d4b\u8bd5\u7a0b\u5e8f\uff0c\u5b83\u6d4b\u91cf\u53ef\u6301\u7eed\u5185\u5b58\u5e26\u5bbd\uff08\u4ee5 MB/s \u4e3a\u5355\u4f4d\uff09\u548c\u7b80\u5355\u5411\u91cf\u5185\u6838\u7684\u76f8\u5e94\u8ba1\u7b97\u901f\u7387\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["stream \u4ec5\u6709\u5355\u4e2a\u6587\u4ef6\uff0c\u5728\u8fdb\u884c\u6d4b\u8bd5\u65f6\u53ea\u9700\u8981\u5bf9 ",(0,s.jsx)(n.code,{children:"stream.c"})," \u8fdb\u884c\u7f16\u8bd1\u5373\u53ef\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git clone <https://github.com/microseyuyu/STREAM.git>\ncd STREAM\ngcc -O3 -fopenmp -DN=2000000 -DNTIMES=10 stream.c -o stream\nexport OMP_NUM_THREADS=8\n./stream\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u53c2\u6570\u8bf4\u660e\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"-O3\uff1a\u6307\u5b9a\u6700\u9ad8\u7f16\u8bd1\u4f18\u5316\u7ea7\u522b\uff0c\u5373 3\u3002"}),"\n",(0,s.jsx)(n.li,{children:"fopenmp\uff1a\u542f\u7528OpenMP\uff0c\u9002\u5e94\u591a\u5904\u7406\u5668\u73af\u5883\uff0c\u66f4\u80fd\u5f97\u5230\u5185\u5b58\u5e26\u5bbd\u5b9e\u9645\u6700\u5927\u503c\u3002\u5f00\u542f\u540e\uff0c\u7a0b\u5e8f\u9ed8\u8ba4\u8fd0\u884c\u7ebf\u7a0b\u4e3aCPU\u7ebf\u7a0b\u6570"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"DN=2000000\uff1a\u6307\u5b9a\u6d4b\u8bd5\u6570\u7ec4a[]\u3001b[]\u3001c[]\u7684\u5927\u5c0f\uff08Array size\uff09\u3002\u8be5\u503c\u5bf9\u6d4b\u8bd5\u7ed3\u679c\u5f71\u54cd\u8f83\u5927\uff085.9\u7248\u672c\u9ed8\u8ba4\u503c2000000,\u3002\u82e5stream.c\u4e3a5.10\u7248\u672c\uff0c\u53c2\u6570\u540d\u53d8\u4e3a-DSTREAM_ARRAY_SIZE\uff0c\u9ed8\u8ba4\u503c10000000\uff09\u3002\u6ce8\u610f\uff1a\u5fc5\u987b\u8bbe\u7f6e\u6d4b\u8bd5\u6570\u7ec4\u5927\u5c0f\u8fdc\u5927\u4e8eCPU \u6700\u9ad8\u7ea7\u7f13\u5b58\uff08\u4e00\u822c\u4e3aL3 Cache\uff09\u7684\u5927\u5c0f\uff0c\u5426\u5219\u5c31\u662f\u6d4b\u8bd5CPU\u7f13\u5b58\u7684\u541e\u5410\u6027\u80fd\uff0c\u800c\u975e\u5185\u5b58\u541e\u5410\u6027\u80fd\u3002"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"-DNTIMES=10\uff1a\u6267\u884c\u7684\u6b21\u6570\uff0c\u5e76\u4ece\u8fd9\u4e9b\u7ed3\u679c\u4e2d\u9009\u6700\u4f18\u503c\u3002"}),"\n",(0,s.jsx)(n.li,{children:"OMP_NUM_THREADS=8 \u7ebf\u7a0b\u6570\u91cf\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u53c2\u8003\u7ed3\u679c\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"debian@lpi4a:~/Desktop/STREAM$ ./stream\n-------------------------------------------------------------\nSTREAM version $Revision: 5.10 $\n-------------------------------------------------------------\nThis system uses 8 bytes per array element.\n-------------------------------------------------------------\n*****  WARNING: ******\n      It appears that you set the preprocessor variable N when compiling this code.\n      This version of the code uses the preprocesor variable STREAM_ARRAY_SIZE to control the array size\n      Reverting to default value of STREAM_ARRAY_SIZE=10000000\n*****  WARNING: ******\nArray size = 10000000 (elements), Offset = 0 (elements)\nMemory per array = 76.3 MiB (= 0.1 GiB).\nTotal memory required = 228.9 MiB (= 0.2 GiB).\nEach kernel will be executed 10 times.\n The *best* time for each kernel (excluding the first iteration)\n will be used to compute the reported bandwidth.\n-------------------------------------------------------------\nNumber of Threads requested = 8\nNumber of Threads counted = 8\n-------------------------------------------------------------\nYour clock granularity/precision appears to be 1 microseconds.\nEach test below will take on the order of 21622 microseconds.\n   (= 21622 clock ticks)\nIncrease the size of the arrays if this shows that\nyou are not getting at least 20 clock ticks per test.\n-------------------------------------------------------------\nWARNING -- The above is only a rough guideline.\nFor best results, please be sure you know the\nprecision of your system timer.\n-------------------------------------------------------------\nFunction    Best Rate MB/s  Avg time     Min time     Max time\nCopy:            8364.2     0.019258     0.019129     0.019508\nScale:           8291.0     0.019572     0.019298     0.020162\nAdd:             6223.6     0.038835     0.038563     0.040011\nTriad:           6222.5     0.038776     0.038570     0.039470\n-------------------------------------------------------------\nSolution Validates: avg error less than 1.000000e-13 on all three arrays\n-------------------------------------------------------------\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>c});var t=r(6540);const s={},o=t.createContext(s);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);