"use strict";(self.webpackChunkrevyos_docs_new=self.webpackChunkrevyos_docs_new||[]).push([[2845],{471:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"adaptation/GStreamer\u64ad\u653e\u5668\u9002\u914d","title":"GStreamer \u64ad\u653e\u5668\u9002\u914d","description":"\u9002\u7528SDK v1.1.2","source":"@site/docs/adaptation/GStreamer\u64ad\u653e\u5668\u9002\u914d.md","sourceDirName":"adaptation","slug":"/adaptation/GStreamer\u64ad\u653e\u5668\u9002\u914d","permalink":"/revyos-docs-new/docs/adaptation/GStreamer\u64ad\u653e\u5668\u9002\u914d","draft":false,"unlisted":false,"editUrl":"https://github.com/kagura114/revyos-docs-new/tree/main/docs/adaptation/GStreamer\u64ad\u653e\u5668\u9002\u914d.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"GStreamer \u64ad\u653e\u5668\u9002\u914d","sidebar_position":1},"sidebar":"documentSidebar","previous":{"title":"T-Head QEMU \u7f16\u8bd1\u6d41\u7a0b","permalink":"/revyos-docs-new/docs/build/other/thead-qemu\u7f16\u8bd1\u6d41\u7a0b"},"next":{"title":"GStreamer pipeline","permalink":"/revyos-docs-new/docs/adaptation/GStreamer-pipeline-example-with-thead-omxil-lib"}}');var d=i(4848),l=i(8453);const r={title:"GStreamer \u64ad\u653e\u5668\u9002\u914d",sidebar_position:1},o="\u652f\u6301 PTG omxil \u5e93\u7684 GStreamer \u64ad\u653e\u5668\u9002\u914d\u6587\u6863",t={},c=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"A. GStreamer omxh264dec \u89e3\u7801\u6d4b\u8bd5",id:"a-gstreamer-omxh264dec-\u89e3\u7801\u6d4b\u8bd5",level:2},{value:"1. \u9a71\u52a8\u7f16\u8bd1\u3001\u5b89\u88c5\u4ee5\u53ca\u786c\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u8bbe\u7f6e",id:"1-\u9a71\u52a8\u7f16\u8bd1\u5b89\u88c5\u4ee5\u53ca\u786c\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u8bbe\u7f6e",level:3},{value:"1.1 \u7f16\u8bd1\u9a71\u52a8",id:"11-\u7f16\u8bd1\u9a71\u52a8",level:4},{value:"1.1.1\u66ff\u4ee3\u65b9\u6848",id:"111\u66ff\u4ee3\u65b9\u6848",level:5},{value:"1.2 \u5b89\u88c5\u9a71\u52a8",id:"12-\u5b89\u88c5\u9a71\u52a8",level:4},{value:"1.3 \u8bbe\u7f6e\u786c\u4ef6\u8bbf\u95ee\u6743\u9650",id:"13-\u8bbe\u7f6e\u786c\u4ef6\u8bbf\u95ee\u6743\u9650",level:4},{value:"RevyOS \u9002\u914d\u8bb0\u5f55",id:"revyos-\u9002\u914d\u8bb0\u5f55",level:4},{value:"2. \u5b89\u88c5 vpu-omxil \u5e76\u8c03\u6574\u914d\u7f6e",id:"2-\u5b89\u88c5-vpu-omxil-\u5e76\u8c03\u6574\u914d\u7f6e",level:3},{value:"2.1 \u5c06 <code>vpu-omxil</code> \u4e2d\u7684\u7ec4\u4ef6\u6ce8\u518c\u5230 <code>libomxil-bellagio</code> \u4e2d",id:"21-\u5c06-vpu-omxil-\u4e2d\u7684\u7ec4\u4ef6\u6ce8\u518c\u5230-libomxil-bellagio-\u4e2d",level:4},{value:"2.1.1 RevyOS/Debian \u6ce8\u518c\u7ec4\u4ef6",id:"211-revyosdebian-\u6ce8\u518c\u7ec4\u4ef6",level:5},{value:"2.2 \u8c03\u6574 gstomx.conf \u7684\u8bbe\u7f6e",id:"22-\u8c03\u6574-gstomxconf-\u7684\u8bbe\u7f6e",level:4},{value:"3. \u6dfb\u52a0 dmabuf \u8865\u4e01",id:"3-\u6dfb\u52a0-dmabuf-\u8865\u4e01",level:3},{value:"4. GStreamer \u89e3\u7801\u521d\u6b65\u6d4b\u8bd5",id:"4-gstreamer-\u89e3\u7801\u521d\u6b65\u6d4b\u8bd5",level:3},{value:"RevyOS \u9002\u914d\u8bb0\u5f55",id:"revyos-\u9002\u914d\u8bb0\u5f55-1",level:4},{value:"B. \u9009\u7528\u5408\u9002\u7684 GStreamer video-sink",id:"b-\u9009\u7528\u5408\u9002\u7684-gstreamer-video-sink",level:2},{value:"RevyOS \u9002\u914d\u8bb0\u5f55",id:"revyos-\u9002\u914d\u8bb0\u5f55-2",level:3},{value:"C. \u64ad\u653e\u5668\u652f\u6301",id:"c-\u64ad\u653e\u5668\u652f\u6301",level:2},{value:"RevyOS \u9002\u914d\u8bb0\u5f55",id:"revyos-\u9002\u914d\u8bb0\u5f55-3",level:3},{value:"\u603b\u7ed3\uff1aRevyOS \u9002\u914d\u5de5\u4f5c",id:"\u603b\u7ed3revyos-\u9002\u914d\u5de5\u4f5c",level:2},{value:"\u672c\u6587\u6240\u7528\u8d44\u6e90",id:"\u672c\u6587\u6240\u7528\u8d44\u6e90",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"\u652f\u6301-ptg-omxil-\u5e93\u7684-gstreamer-\u64ad\u653e\u5668\u9002\u914d\u6587\u6863",children:"\u652f\u6301 PTG omxil \u5e93\u7684 GStreamer \u64ad\u653e\u5668\u9002\u914d\u6587\u6863"})}),"\n",(0,d.jsx)(n.p,{children:"\u9002\u7528SDK v1.1.2"}),"\n",(0,d.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,d.jsxs)(n.p,{children:["PTG \u7684 OpenMAX IL \u5e93\uff08\u4e0b\u79f0 ",(0,d.jsx)(n.code,{children:"vpu-omxil"}),"\uff09\u53ef\u4f7f LicheePi 4A \u80fd\u591f\u6d41\u7545\u786c\u89e3\u7801 4k 60fps \u7684\u89c6\u9891\uff0c\u90a3\u4e48\u5177\u4f53\u5e94\u8be5\u5982\u4f55\u4f7f\u7528\u8be5\u5e93\u5462\uff1f\u672c\u6587\u5c06\u4e3b\u8981\u4ecb\u7ecd LicheePi 4A \u5f00\u53d1\u677f\u4e0a Parole \u64ad\u653e\u5668\u7684\u96c6\u6210\u4e0e\u4f7f\u7528\uff0c\u7528\u6237\u53ef\u6839\u636e\u672c\u6587\u6765\u4e86\u89e3\u5728 LicheePi 4A \u4e0a\u7684\u9002\u914d\u8fc7\u7a0b\n\u4ee5 h264 \u7684\u786c\u89e3\u4e3a\u4f8b\uff0c\u89c6\u9891\u786c\u89e3\u7684\u5de5\u4f5c\u6d41\u7a0b\u5982\u56fe\u6240\u793a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-plain",children:"                +-------------------------------------------+\n                |    +------------+       +------------+    |   +--------+\nvideo stream----+---\x3e| omxh264dec +------\x3e| video-sink +----+--\x3e| player |\n                |    +------+-----+       +------------+    |   +--------+\n                |           |     GStreamer                 |\n                +-----------+-------------------------------+\n                            |\n                      +-----v-----+\n                      | vpu-omxil |\n                      +-----+-----+\n                            |\n                            |\n                    +-------v-------+\n                    | kernel module |\n                    |    (driver)   |\n                    +-------+-------+\n                            |\n                            v\n                        hardware\n"})}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\u89c6\u9891\u6d41\uff08video stream\uff09\u7531 GStreamer \u8bfb\u5165\u540e\u7ecf\u8fc7\u4e00\u7cfb\u5217\u9884\u5904\u7406\uff0c\u9001\u5230 GStreamer \u7684\u89e3\u7801\u5668",(0,d.jsx)(n.code,{children:"omxh264dec"})," \u4e2d"]}),"\n",(0,d.jsx)(n.li,{children:"omxh264dec \u8c03\u7528\u52a8\u6001\u5e93\uff0c\u5373 PTG \u63d0\u4f9b\u7684 vpu-omxil \u5e93\uff0c\u8be5\u5e93\u901a\u8fc7\u9a71\u52a8\u8bbf\u95ee\u786c\u4ef6\uff08kernel module\uff09\u8fdb\u884c\u786c\u89e3"}),"\n",(0,d.jsx)(n.li,{children:"\u89e3\u7801\u540e\u7684\u6d41\u4f20\u8f93\u5230 GStreamer \u7684 video-sink \u4e2d\uff0c\u5e76\u7531\u64ad\u653e\u5668\uff08player\uff09\u5448\u73b0"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"a-gstreamer-omxh264dec-\u89e3\u7801\u6d4b\u8bd5",children:"A. GStreamer omxh264dec \u89e3\u7801\u6d4b\u8bd5"}),"\n",(0,d.jsx)(n.p,{children:"\u5c06 omxh264 \u89e3\u7801\u7684\u90e8\u5206\u5355\u72ec\u62ce\u51fa\u6765\uff0c\u5927\u4f53\u7684\u7ed3\u6784\u5982\u4e0b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-plain",children:"  +---+------------+----+\n  |   +------------+    |\n  |   | omxh264dec |    |\n  |   +------------+    |\n  |      GStreamer      |\n  +----------+----------+\n             |\n  +----+-----v-----+----+\n  |    +-----------+    |\n  |    | vpu-omxil |    |\n  |    +-----------+    |\n  |  libomxil-bellagio  |\n  +----------+----------+\n             |\n+------------v------------+\n|  - memalloc   - vc8000  |\n|  - hantrodec  - vidmem  |\n|      kernel modules     |\n+------------+------------+\n             |\n             v\n          hardware\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u6211\u4eec\u4f9d\u7167\u81ea\u5e95\u5411\u4e0a\u7684\u987a\u5e8f\u6784\u5efa\u56fe\u793a\u7684\u94fe\u6761\u3002\n\u672c\u8282\u7684\u4e3b\u8981\u76ee\u7684\u662f\u4f7f omxh264dec \u89e3\u7801\u5668\u80fd\u591f\u8fd0\u884c\uff0c\u5e76\u4e0d\u6d89\u53ca\u5230\u8f93\u51fa\u5c4f\u5e55\u7b49\u5185\u5bb9\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"1-\u9a71\u52a8\u7f16\u8bd1\u5b89\u88c5\u4ee5\u53ca\u786c\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u8bbe\u7f6e",children:"1. \u9a71\u52a8\u7f16\u8bd1\u3001\u5b89\u88c5\u4ee5\u53ca\u786c\u4ef6\u8bbf\u95ee\u6743\u9650\u7684\u8bbe\u7f6e"}),"\n",(0,d.jsx)(n.p,{children:"\u786c\u89e3\u7801\u9700\u8981\u8bbf\u95ee\u786c\u4ef6\uff0c\u800c\u8bbf\u95ee\u786c\u4ef6\u53c8\u9700\u8981\u9a71\u52a8\uff0c\u6240\u4ee5\u9700\u8981\u7f16\u8bd1\u5e76\u5b89\u88c5\u9a71\u52a8"}),"\n",(0,d.jsx)(n.h4,{id:"11-\u7f16\u8bd1\u9a71\u52a8",children:"1.1 \u7f16\u8bd1\u9a71\u52a8"}),"\n",(0,d.jsx)(n.p,{children:"PTG \u63d0\u4f9b\u7684\u9a71\u52a8\u6e90\uff1a"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://github.com/revyos/vpu-vc8000e-kernel",children:"https://github.com/revyos/vpu-vc8000e-kernel"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://github.com/revyos/vpu-vc8000d-kernel",children:"https://github.com/revyos/vpu-vc8000d-kernel"})}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://github.com/revyos/video_memory",children:"https://github.com/revyos/video_memory"})}),"\n",(0,d.jsx)(n.h5,{id:"111\u66ff\u4ee3\u65b9\u6848",children:"1.1.1\u66ff\u4ee3\u65b9\u6848"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"https://github.com/revyos/thead-kernel",children:"revyos/thead-kernel"})," \u5df2\u7ecf\u5408\u5e76\u4e86\u4e0a\u8ff0\u4e09\u4e2a\u5185\u6838\u6a21\u5757, \u4f7f\u7528revyos_defconfig \u53ef\u4ee5\u65e0\u9700\u7f16\u8bd1\u4e0a\u8ff0\u5185\u6838\u6a21\u5757"]}),"\n",(0,d.jsx)(n.h4,{id:"12-\u5b89\u88c5\u9a71\u52a8",children:"1.2 \u5b89\u88c5\u9a71\u52a8"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:'# depmod \u5206\u6790\u53ef\u8f7d\u5165\u6a21\u5757\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5728 /lib/modules/<kernel-version>\u4e2d\u6dfb\u52a0modules.dep\u6587\u4ef6\uff0c\u4ee5\u4fbf\u540e\u7eed modprobe \u4f7f\u7528\nsudo depmod -a\nsudo modprobe vidmem vc8000 hantrodec memalloc\n\n## \u5982\u679c modprobe \u5b89\u88c5\u6709\u95ee\u9898\u7684\u8bdd\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528 insmod \u5b89\u88c5\n#cd /usr/lib/modules/$(uname -r)\n#sudo insmod $(find . -name *vidmem.ko*)\n#sudo insmod $(find . -name *vc8000.ko*)\n#sudo insmod $(find . -name *hantrodec.ko*)\n#sudo insmod $(find . -name *memalloc.ko*)\n\n# \u53ef\u9009\uff1a\u8bbe\u7f6e\u5f00\u673a\u52a0\u8f7d\u6a21\u5757\necho -e "\\nvidmem\\nhantrodec\\nmemalloc\\nvc8000\\n" | sudo tee -a /etc/modules > /dev/null\n'})}),"\n",(0,d.jsx)(n.h4,{id:"13-\u8bbe\u7f6e\u786c\u4ef6\u8bbf\u95ee\u6743\u9650",children:"1.3 \u8bbe\u7f6e\u786c\u4ef6\u8bbf\u95ee\u6743\u9650"}),"\n",(0,d.jsxs)(n.p,{children:["\u5b89\u88c5\u5185\u6838\u6a21\u5757\u540e\uff0c",(0,d.jsx)(n.code,{children:"/dev"})," \u76ee\u5f55\u4e0b\u4f1a\u51fa\u73b0 ",(0,d.jsx)(n.code,{children:"hantrodec"})," ",(0,d.jsx)(n.code,{children:"vidmem"})," ",(0,d.jsx)(n.code,{children:"vc8000"})," \u4e09\u4e2a\u8bbe\u5907\u6587\u4ef6\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u5bf9\u5176\u6ca1\u6709\u8bbf\u95ee\u6743\u9650\uff0c\u5982\u679c\u4e0d\u4fee\u6539\u6743\u9650\u7684\u8bdd\uff0c\u975e root \u7528\u6237\u5728\u6253\u5f00 omxil \u5e93\u65f6\u4f1a\u62a5\u9519\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:'# \u751f\u6548\u4e00\u6b21\ncd /dev\nsudo chmod 666 hantrodec vidmem vc8000\n\n# \u957f\u671f\u751f\u6548\ncat << EOF | sudo tee /lib/udev/rules.d/70-hantro.rules > /dev/null\nKERNEL=="vidmem", MODE="0666"\nKERNEL=="hantrodec", MODE="0666"\nKERNEL=="vc8000", MODE="0666"\nEOF\n'})}),"\n",(0,d.jsx)(n.h4,{id:"revyos-\u9002\u914d\u8bb0\u5f55",children:"RevyOS \u9002\u914d\u8bb0\u5f55"}),"\n",(0,d.jsxs)(n.p,{children:["\u5982\u679c\u8981\u83b7\u53d6 RevyOS \u7279\u5b9a\u7248\u672c\u7684\u5185\u6838\u6a21\u5757\uff0c\u53ef\u8fdb\u5165 ",(0,d.jsx)(n.a,{href:"https://github.com/revyos/thead-kernel",children:"revyos/thead-kernel"})," \uff0c\u5e76\u5728 GitHub CI \u4e2d\u4e0b\u8f7d artifacts"]}),"\n",(0,d.jsx)(n.h3,{id:"2-\u5b89\u88c5-vpu-omxil-\u5e76\u8c03\u6574\u914d\u7f6e",children:"2. \u5b89\u88c5 vpu-omxil \u5e76\u8c03\u6574\u914d\u7f6e"}),"\n",(0,d.jsxs)(n.p,{children:["\u9996\u5148\uff0c\u8bf7\u5c06 vpu-omxil \u4e0b\u8f7d\u5e76\u89e3\u538b\u5230 /usr/lib/omxil/\u4e2d\n",(0,d.jsx)(n.a,{href:"https://drive.google.com/file/d/1pYgCVI7WltfpskltJ-RqzVUCEC21FS56",children:"vpu-omxil_1.2.1.tar.gz"}),"\n\u5982\u4e0b\u56fe\u6240\u793a\uff0c \u9700\u8981"]}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\u5c06 ",(0,d.jsx)(n.code,{children:"vpu-omxil"})," \u4e2d\u7684 OpenMax \u7ec4\u4ef6\u6ce8\u518c\u5230 ",(0,d.jsx)(n.code,{children:"libomxil-bellagio"})," \u4e2d"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"gst-omx"}),"\uff08\u8be5\u5305\u63d0\u4f9b\u4e86 omxh264dec \u89e3\u7801\u5668\uff09 \u8c03\u7528 ",(0,d.jsx)(n.code,{children:"libomxil-bellagio"})," \u7684\u65f6\u5019\u4e5f\u9700\u8981\u77e5\u9053\u8c03\u7528\u7684\u7ec4\u4ef6\u540d\u79f0"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-plain",children:"+---------+   +-------------------+   +-----------+\n| gst-omx +--\x3e| libomxil-bellagio +--\x3e| vpu-omxil |\n+---------+   +-------------------+   +-----------+\n"})}),"\n",(0,d.jsxs)(n.h4,{id:"21-\u5c06-vpu-omxil-\u4e2d\u7684\u7ec4\u4ef6\u6ce8\u518c\u5230-libomxil-bellagio-\u4e2d",children:["2.1 \u5c06 ",(0,d.jsx)(n.code,{children:"vpu-omxil"})," \u4e2d\u7684\u7ec4\u4ef6\u6ce8\u518c\u5230 ",(0,d.jsx)(n.code,{children:"libomxil-bellagio"})," \u4e2d"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo apt install libomxil-bellagio-bin libomxil-bellagio0\n# \u6ce8\u518c\u7ec4\u4ef6\nomxregister-bellagio -v /usr/lib/omxil/\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u4f7f\u7528 omxregister-bellagio \u751f\u6210\u6ce8\u518c\u6587\u4ef6\uff0c\u9ed8\u8ba4\u8def\u5f84\u4e3a ~/.omxregister"}),"\n",(0,d.jsx)(n.h5,{id:"211-revyosdebian-\u6ce8\u518c\u7ec4\u4ef6",children:"2.1.1 RevyOS/Debian \u6ce8\u518c\u7ec4\u4ef6"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.a,{href:"https://github.com/revyos/th1520-vpu",children:"th1520-vpu"})," \u5229\u7528\u4e86 debian \u5728 ",(0,d.jsx)(n.code,{children:"usr/lib/riscv64-linux-gnu/libomxil-bellagio0"})," \u5b89\u88c5\u4e4b\u540e\n\u89e6\u53d1\u81ea\u52a8\u6ce8\u518c\u884c\u4e3a \u7ed3\u679c\u5982\u4e0b"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"cat /var/lib/libomxil-bellagio0/registry\n/usr/lib/riscv64-linux-gnu/libomxil-bellagio0/libOMX.hantro.H2.video.encoder.so\n ==> OMX.hantro.H2.video.encoder ==> OMX.hantro.H2.video.encoder.avc:OMX.hantro.H2.video.encoder.hevc:\n/usr/lib/riscv64-linux-gnu/libomxil-bellagio0/libOMX.hantro.VC8000D.image.decoder.so\n ==> OMX.hantro.VC8000D.image.decoder ==> OMX.hantro.VC8000D.image.decoder.jpeg:\n/usr/lib/riscv64-linux-gnu/libomxil-bellagio0/libOMX.hantro.H2.image.encoder.so\n ==> OMX.hantro.H2.image.encoder ==> OMX.hantro.H2.image.encoder.jpeg:\n/usr/lib/riscv64-linux-gnu/libomxil-bellagio0/libOMX.hantro.VC8000D.video.decoder.so\n ==> OMX.hantro.VC8000D.video.decoder ==> OMX.hantro.VC8000D.video.decoder.mpeg4:OMX.hantro.VC8000D.video.decoder.avc:OMX.hantro.VC8000D.video.decoder.avs:OMX.hantro.VC8000D.video.decoder.h263:OMX.hantro.VC8000D.video.decoder.wmv:OMX.hantro.VC8000D.video.decoder.vp6:OMX.hantro.VC8000D.video.decoder.vp8:OMX.hantro.VC8000D.video.decoder.jpeg:OMX.hantro.VC8000D.video.decoder.hevc:OMX.hantro.VC8000D.video.decoder.vp9:OMX.hantro.VC8000D.video.decoder.avs2:\n"})}),"\n",(0,d.jsx)(n.h4,{id:"22-\u8c03\u6574-gstomxconf-\u7684\u8bbe\u7f6e",children:"2.2 \u8c03\u6574 gstomx.conf \u7684\u8bbe\u7f6e"}),"\n",(0,d.jsx)(n.p,{children:"\u8c03\u6574 gstomx.conf \u7684\u8bbe\u7f6e\u4ee5\u4f7f\u89e3\u7801\u5668 omxh264dec \u8c03\u7528\u6b63\u786e\u7684\u7ec4\u4ef6\uff0c\u5177\u4f53\u8bf7\u67e5\u770b\u9488\u5bf9 gst-omx \u7684\u8865\u4e01"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://gist.github.com/Sakura286/26777ea8204c1819885e093806a4f7ca#file-gst-omx-01-add-libomxil-config-patch",children:"gst-omx-01-add-libomxil-config.patch"})}),"\n",(0,d.jsx)(n.h3,{id:"3-\u6dfb\u52a0-dmabuf-\u8865\u4e01",children:"3. \u6dfb\u52a0 dmabuf \u8865\u4e01"}),"\n",(0,d.jsxs)(n.p,{children:["\u8bf7\u67e5\u770b PTG \u63d0\u4f9b\u7684\u9488\u5bf9 gst-omx \u7684 dmabuf \u8865\u4e01\n",(0,d.jsx)(n.a,{href:"https://gist.github.com/Sakura286/26777ea8204c1819885e093806a4f7ca#file-gst-omx-02-set-dec-out-port-dmabuf-patch",children:"gst-omx-02-set-dec-out-port-dmabuf.patch"})]}),"\n",(0,d.jsx)(n.h3,{id:"4-gstreamer-\u89e3\u7801\u521d\u6b65\u6d4b\u8bd5",children:"4. GStreamer \u89e3\u7801\u521d\u6b65\u6d4b\u8bd5"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo apt install gstreamer1.0-omx-generic gstreamer1.0-omx-bellagio-config gstreamer1.0-plugins-bad gstreamer1.0-plugins-base gstreamer1.0-gl gstreamer1.0-plugins-good gstreamer1.0-tools\n\n# 1 \u57fa\u672c\u89e3\u7801\ngst-launch-1.0 filesrc location=<test.mp4> ! qtdemux !  h264parse ! omxh264dec  ! videoconvert ! fakesink  sync=false\n# 2 \u5728\u7ec8\u7aef\u4e2d\u663e\u793a fps\n# \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/73948308\ngst-launch-1.0 filesrc location=<test.mp4> ! qtdemux !  h264parse ! omxh264dec  ! videoconvert ! fpsdisplaysink video-sink=fakesink  text-overlay=false sync=false -v 2>&1\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"fakesink"}),"\u4f1a\u628a\u524d\u9762\u7684\u89c6\u9891\u6d41\u5168\u90e8\u541e\u6389\uff0c\u4e0d\u8f93\u51fa\u753b\u9762\uff08\u56e0\u800c\u4e0d\u4f1a\u5728 video-sink \u8fd9\u4e00\u73af\u8282\u635f\u5931\u6027\u80fd\uff09\uff0c\u4f46\u662f\u7ed3\u5408fpsdisplaysink\u53ef\u4ee5\u8bfb\u53d6\u5230\u89e3\u7801\u7684\u901f\u5ea6\u3002\u6b63\u5e38\u65e5\u5fd7\u5982\u4e0b\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-log",children:"Setting pipeline to PAUSED ...[DBGT]\nvc8kdec compiled without trace support (ENABLE_DBGT_TRACE switch not enabled)\nPipeline is PREROLLING ...\nRedistribute latency...\nOMX  ! decoder_get_parameter OMX_ErrorNoMore (2)\nPipeline is PREROLLED ...\nSetting pipeline to PLAYING ...\nNew clock: GstSystemClockRedistribute latency...\n0:01:39.5 / 0:01:49.4 (90.9 %)\n"})}),"\n",(0,d.jsxs)(n.p,{children:["**\u3010TIP\u3011**\u5982\u679c\u6709 ",(0,d.jsx)(n.code,{children:"[omxh264dec-omxh264dec0: Could not initialize supporting library.](https://gist.github.com/Sakura286/015fae6792e160268db7ad8a697dd2df)"})," \u7b49\u5b57\u6837\u7684\u62a5\u9519\uff0c\u53ef\u4ee5\u5b89\u88c5",(0,d.jsx)(n.code,{children:"gst-omx"}),"\u3001",(0,d.jsx)(n.code,{children:"libomxil-bellagio"}),"\u4e0e",(0,d.jsx)(n.code,{children:"libc6"}),"\u76f8\u5173\u7684 debug-symbol \u5305\uff0c\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"gdb"})," \u542f\u52a8\u4e0a\u8ff0\u547d\u4ee4\u8fdb\u884c\u8c03\u8bd5\u3002\u8c03\u8bd5\u65f6\uff0c\u5148\u65ad",(0,d.jsx)(n.code,{children:"DWLInit"}),"\uff0c\u7136\u540e\u518d\u65ad",(0,d.jsx)(n.code,{children:"open"}),"\uff0c\u5177\u4f53\u770b\u662f\u6253\u5f00\u54ea\u4e2a\u5730\u65b9\u7684\u65f6\u5019\u51fa\u9519\u4e86\u3002"]}),"\n",(0,d.jsx)(n.h4,{id:"revyos-\u9002\u914d\u8bb0\u5f55-1",children:"RevyOS \u9002\u914d\u8bb0\u5f55"}),"\n",(0,d.jsx)(n.p,{children:"RevyOS \u9002\u914d\u8fc7\u7a0b\u4e2d\u5bf9\u4e8e\u521d\u59cb\u5316\u52a8\u6001\u5e93\u5931\u8d25\u627e\u5230\u4e86\u5982\u4e0b\u4e09\u79cd\u539f\u56e0\uff1a"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"\u7f16\u8bd1 vpu-omxil \u65f6\u4f7f\u7528\u7684\u5de5\u5177\u94fe\u4e0e\u5f53\u524d\u7cfb\u7edf\u4e0d\u517c\u5bb9"}),"\n",(0,d.jsxs)(n.li,{children:["\u672a\u4f7f\u7528",(0,d.jsx)(n.code,{children:"omxregister-bellagio"}),"\u6ce8\u518c vpu-omxil"]}),"\n",(0,d.jsxs)(n.li,{children:["\u672a\u8c03\u6574 ",(0,d.jsx)(n.code,{children:"/dev"})," \u76ee\u5f55\u4e0b ",(0,d.jsx)(n.code,{children:"hantrodec"})," ",(0,d.jsx)(n.code,{children:"vc8000"})," ",(0,d.jsx)(n.code,{children:"vidmem"})," \u7b49\u8bbe\u5907\u7684\u6743\u9650"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"b-\u9009\u7528\u5408\u9002\u7684-gstreamer-video-sink",children:"B. \u9009\u7528\u5408\u9002\u7684 GStreamer video-sink"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"video-sink"})," \u662f\u89c6\u9891\u6d41\u5728\u6574\u4e2a ",(0,d.jsx)(n.a,{href:"https://gstreamer.freedesktop.org/documentation/tutorials/basic/concepts.html",children:"GStreamer pipeline"})," \u4e2d\u7684\u6700\u540e\u4e00\u6b65\uff0c\u5176\u4f5c\u7528\u4e00\u822c\u662f\u5c06\u89c6\u9891\u6d41\u8f93\u51fa\u5230\u5c4f\u5e55\u4e0a\u3002\n\u524d\u6587\u4e2d",(0,d.jsx)(n.code,{children:"fakesink"}),"\u53ea\u662f\u6d4b\u8bd5\u89e3\u7801\u5668\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u7684\u7279\u6b8a ",(0,d.jsx)(n.code,{children:"video-sink"}),"\uff0c",(0,d.jsx)(n.a,{href:"https://gstreamer.freedesktop.org/documentation/tutorials/basic/platform-specific-elements.html?gi-language=c",children:"\u53ef\u9009\u7684 video-sink"}),"\u975e\u5e38\u591a\uff0c\u5e38\u89c1\u7684\u6709 ",(0,d.jsx)(n.code,{children:"autovideosink"}),"\uff0c",(0,d.jsx)(n.code,{children:"ximagesink"}),"\uff0c",(0,d.jsx)(n.code,{children:"xvimagesink"}),"\uff0c",(0,d.jsx)(n.code,{children:"fbdevsink"}),"\uff0c",(0,d.jsx)(n.code,{children:"waylandsink"}),"\uff0c",(0,d.jsx)(n.code,{children:"glimagesink"}),"\uff0c",(0,d.jsx)(n.code,{children:"gtkglsink"}),"\u7b49\uff0c\u5b83\u4eec\u5404\u5728\u4e0d\u540c\u7684\u63d2\u4ef6\u5305\u91cc\uff0c\u9700\u8981\u914c\u60c5\u5b89\u88c5\uff1a"]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:(0,d.jsx)(n.strong,{children:"video-sink"})}),(0,d.jsx)(n.th,{children:(0,d.jsx)(n.strong,{children:"\u6240\u5c5e\u5305\u540d"})})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"waylandsink"}),(0,d.jsx)(n.td,{children:"gstreamer1.0-plugins-bad"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"fbdevsink"}),(0,d.jsx)(n.td,{children:"gstreamer1.0-plugins-bad"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"autovideosink"}),(0,d.jsx)(n.td,{children:"gstreamer1.0-plugins-good"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"gtkglsink"}),(0,d.jsx)(n.td,{children:"gstreamer1.0-plugins-good"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"ximagesink | xvimagesink"}),(0,d.jsx)(n.td,{children:"gstreamer1.0-plugins-base"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"glimagesink"}),(0,d.jsx)(n.td,{children:"gstreamer1.0-plugins-base | gstreamer1.0-gl"})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["**\u3010TIP\u3011**\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"gst-inspect-1.0 <video-sink-name>"})," \u6765\u67e5\u770b\u5bf9\u5e94 video-sink \u53ef\u7528\u7684\u9009\u9879\n**\u3010TIP\u3011**\u6dfb\u52a0 ",(0,d.jsx)(n.code,{children:"--gst-debug-level=<lv>"})," \u6765\u83b7\u5f97\u66f4\u591a\u7684",(0,d.jsx)(n.a,{href:"https://gstreamer.freedesktop.org/documentation/tutorials/basic/debugging-tools.html#the-debug-log",children:"\u8f93\u51fa\u65e5\u5fd7"}),"\uff0c\u5176\u4e2d ",(0,d.jsx)(n.code,{children:"<lv>"})," \u4ee3\u8868\u4e86\u4ece 1 \u5230 6\uff0c\u5570\u55e6\u7a0b\u5ea6\u4ece\u4f4e\u5230\u9ad8\uff0c\u5efa\u8bae\u5728\u7b49\u7ea7 4 \u53ca\u4ee5\u4e0b\uff0c\u5426\u5219\u65e5\u5fd7\u4f1a\u975e\u5e38\u957f\n\u8bf7\u5c1d\u8bd5\u4e0d\u540c\u7684 video-sink \uff0c\u5e76\u5c1d\u8bd5\u4e0d\u540c\u7684\u63d2\u4ef6\u53c2\u6570\uff0c\u4ee5\u53ca\u7ed9\u4e88\u4e0d\u540c\u7684\u73af\u5883\u53d8\u91cf\uff0c\u76f4\u81f3\u627e\u5230\u53ef\u4ee5\u6d41\u7545\u786c\u89e3 H264 \u7684\u90a3\u4e00\u4e2a\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"revyos-\u9002\u914d\u8bb0\u5f55-2",children:"RevyOS \u9002\u914d\u8bb0\u5f55"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"**waylandsink**"}),"\uff1a\u7531\u4e8e\u73b0\u5728\uff0820230720\uff09RevyOS \u91c7\u7528\u4e86 Xfce \u684c\u9762\uff0c\u4e0d\u53ef\u80fd\u652f\u6301 Wayland\uff0c\u6545 ",(0,d.jsx)(n.code,{children:"waylandsink"}),"\u4ece\u539f\u7406\u4e0a\u65e0\u6cd5\u4f7f\u7528"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"**fbdevsink**"}),"\u4e0e",(0,d.jsx)(n.code,{children:"**ximagesink**"}),"\uff1a\u65e0\u6cd5\u4f7f\u7528"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"**xvimagesink**"}),"\uff1a\u901a\u8fc7",(0,d.jsx)(n.a,{href:"https://gstreamer.freedesktop.org/documentation/tutorials/basic/debugging-tools.html#getting-pipeline-graphs",children:"\u6d41\u6c34\u7ebf\u56fe"}),"\u4ee5\u53ca\u65e5\u5fd7\u53ef\u4ee5\u786e\u5b9a\uff0cplaybin \u6216 autovideosink \u4f1a\u81ea\u52a8\u8c03\u7528 xvimagesink\uff0c\u4f7f\u7528 perf \u5206\u6790\u540e\u53ef\u4ee5\u53d1\u73b0\uff0c\u4f7f\u7528xvimagesink \u4e0d\u53ef\u907f\u514d\u5730\u4f1a\u8fdb\u884c\u5927\u91cf\u7684 memcpy \u64cd\u4f5c\uff0c\u4e25\u91cd\u964d\u4f4e\u89e3\u7801\u6027\u80fd\uff1b\u8be5\u95ee\u9898\u5728\u83b7\u5f97PTG\u7684 dmabuf \u8865\u4e01\u540e\u4f9d\u7136\u5b58\u5728\uff0c\u6545\u65e0\u6cd5\u4f7f\u7528"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"**gtkglsink**"}),"\uff1a",(0,d.jsx)(n.a,{href:"https://gitlab.gnome.org/GNOME/gtk/-/issues/738",children:"GTK3 \u4e0d\u652f\u6301 EGL on X11"}),"\uff0c\u800c RevyOS \u76ee\u524d\u57fa\u4e8e x11\uff0c\u4e14\u53ea\u652f\u6301 EGL\uff0c\u6545\u65e0\u6cd5\u4f7f\u7528"]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["\u5269\u4e0b\u7684\u53ea\u6709",(0,d.jsx)(n.code,{children:"glimagesink"}),"\uff0c\u6839\u636e ",(0,d.jsx)(n.a,{href:"https://gstreamer.freedesktop.org/documentation/gstreamer/running.html#environment-variables",children:"Running and debugging GStreamer Applications"}),"\uff0c\u5e76\u89c2\u5bdf\u5176\u4ed6\u4f7f\u7528\u5230 glimagesink \u7684\u4f8b\u5b50\uff0c\u53ef\u4ee5\u731c\u6d4b\u9700\u8981\u660e\u786e\u6307\u5b9a\u73af\u5883\u53d8\u91cf ",(0,d.jsx)(n.code,{children:"GST_GL_API"}),"\u4e0e ",(0,d.jsx)(n.code,{children:"GST_GL_PLATFORM"}),"\n\u7531\u4e8e RevyOS \u4f7f\u7528\u4e86 gles2+egl \u7684\u7ec4\u5408\uff0c\u4f7f\u7528\u5982\u4e0b\u7684\u547d\u4ee4\uff0c\u6210\u529f\u786c\u89e3\u3002"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"GST_GL_API=gles2 GST_GL_PLATFORM=egl gst-launch-1.0 filesrc location=<test.mp4> ! qtdemux !  h264parse ! omxh264dec  ! videoconvert ! fpsdisplaysink video-sink=glimagesink sync=false\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u7136\u800c GStreamer \u88ab\u64ad\u653e\u5668\u8c03\u7528\u65f6\u662f\u65e0\u6cd5\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u6765\u4f20\u9012\u53c2\u6570\u7684\uff0c\u6240\u4ee5\u6784\u5efa gst-plugins-base \u65f6\u5e94\u5f53\u4f20\u9012\u989d\u5916\u7684 meson \u7f16\u8bd1\u53c2\u6570\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"-Dgl_api=[\\'gles2\\'] -Dgl_platform=[\\'egl\\']\n"})}),"\n",(0,d.jsx)(n.h2,{id:"c-\u64ad\u653e\u5668\u652f\u6301",children:"C. \u64ad\u653e\u5668\u652f\u6301"}),"\n",(0,d.jsx)(n.p,{children:"GStreamer \u7684 pipeline \u6ca1\u6709\u95ee\u9898\u4e4b\u540e\uff0c\u5c31\u9700\u8981\u4f7f\u64ad\u653e\u5668\u652f\u6301\u3002\u4e0d\u540c\u64ad\u653e\u5668\u4f1a\u4f7f\u7528\u5230\u4e0d\u540c\u7684 video-sink\uff0c\u540c\u6837\u5bf9 gstreamer \u6709\u7740\u4e0d\u540c\u7a0b\u5ea6\u7684\u4f9d\u8d56\u3002\n\u9002\u914d\u64ad\u653e\u5668\u65f6\uff0c\u6700\u91cd\u8981\u7684\u5de5\u4f5c\u4fbf\u662f\u2460\u4f7f\u64ad\u653e\u5668\u9002\u914d\u5df2\u9a8c\u8bc1\u7684 video-sink\uff0c\u6216\u8005\u2461\u4f7f gstreamer pipeline \u652f\u6301\u64ad\u653e\u5668\u6307\u5b9a\u7684 video-sink\uff0c\u6b64\u6b21 RevyOS \u9002\u914d\u8fc7\u7a0b\u91c7\u7528\u4e86\u2460\u65b9\u6848\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-plain",children:"                +-------------------------------------------+\n                |    +------------+       +------------+    |   +--------+\nvideo stream----+---\x3e| omxh264dec +------\x3e| video-sink +----+--\x3e| player |\n                |    +------------+       +------------+    |   +--------+\n                |                GStreamer                  |\n                +-------------------------------------------+\n"})}),"\n",(0,d.jsx)(n.h3,{id:"revyos-\u9002\u914d\u8bb0\u5f55-3",children:"RevyOS \u9002\u914d\u8bb0\u5f55"}),"\n",(0,d.jsxs)(n.p,{children:["\u6839\u636e ",(0,d.jsx)(n.a,{href:"https://gstreamer.freedesktop.org/apps/",children:"https://gstreamer.freedesktop.org/apps/"})," \u8fdb\u884c\u7b80\u5355\u7684\u6392\u67e5"]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u662f\u5426\u53ef\u7528"}),(0,d.jsx)(n.th,{children:"\u662f\u5426\u66f4\u65b0"}),(0,d.jsx)(n.th,{children:"\u5e94\u7528\u540d"}),(0,d.jsx)(n.th,{children:"\u5907\u6ce8"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u274c"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Gnash"}),(0,d.jsx)(n.td,{children:"Flash \u64ad\u653e\u5668"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u274c"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"GEntrans"}),(0,d.jsx)(n.td,{children:"Debian \u672a\u6536\u5f55"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u2753"}),(0,d.jsx)(n.td,{children:"20230226"}),(0,d.jsx)(n.td,{children:"Kaffeine"}),(0,d.jsx)(n.td,{children:"\u274c \u9700\u8981\u5927\u91cf KDE \u76f8\u5173\u7ec4\u4ef6"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsxs)(n.td,{children:["\u2714\ufe0f \u5b58\u5728\u4e8e",(0,d.jsx)(n.a,{href:"https://buildd.debian.org/status/package.php?p=kaffeine&suite=sid",children:"riscv64 \u4ed3\u5e93"}),"\u4e2d"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u274c \u5728 Debian amd64 Gnome \u4e0a\uff0c\u64ad\u653e\u7a97\u53e3\u4e0e\u63a7\u5236\u7a97\u53e3\u5206\u79bb\uff0c\u4e14\u9ed8\u8ba4\u8c03\u7528\u4e86 VLC \u8fdb\u884c\u64ad\u653e"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u274c"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Lcdgrilo"}),(0,d.jsx)(n.td,{children:"Debian \u672a\u6536\u5f55"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u2714\ufe0f"}),(0,d.jsx)(n.td,{children:"20230218"}),(0,d.jsx)(n.td,{children:"Parole"}),(0,d.jsx)(n.td,{children:"\u2714\ufe0f For XFCE"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u2753 \u4e0d\u652f\u6301 Wayland\uff0c\u4ec5\u652f\u6301 x11"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u2714\ufe0f Debian amd64 Gnome \u9a8c\u8bc1\u901a\u8fc7"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{}),(0,d.jsxs)(n.td,{children:["\u2714\ufe0f \u5b58\u5728\u4e8e",(0,d.jsx)(n.a,{href:"https://buildd.debian.org/status/package.php?p=parole&suite=sid",children:"riscv64 \u4ed3\u5e93"})," \u4e2d"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u274c"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Songbird"}),(0,d.jsx)(n.td,{children:"Debian \u672a\u6536\u5f55"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u274c"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Snappy"}),(0,d.jsx)(n.td,{children:"Debian \u672a\u6536\u5f55"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"\u274c"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Totem"}),(0,d.jsx)(n.td,{children:"\u9700\u8981 GTK3\uff0c\u7136\u800c GTK3 \u4e0d\u652f\u6301 EGL on X11"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"\u6700\u521d\u9009\u62e9\u7684\u64ad\u653e\u5668\u662f Totem\uff0c\u4f46\u662f\u53d1\u73b0 Totem \u65e0\u6cd5\u6307\u5b9a\u9664\u4e86 gtkglsink \u4ee5\u5916\u7684 video-sink\uff0c\u4e14\u7531\u4e8e RevyOS \u4e0d\u652f\u6301 gtkglsink\uff0c\u6240\u4ee5\u652f\u6301 Totem \u64ad\u653e\u5668\u7684\u96be\u5ea6\u8f83\u5927\u3002\n\u5bf9\u652f\u6301 GStreamer \u7684\u64ad\u653e\u5668\u8fdb\u884c\u6392\u67e5\u540e\u53d1\u73b0\u4e86 Parole \uff0c Parole \u7531 GObject \u7f16\u5199\uff0c\u4e0e\u5e38\u89c1\u7684\u9762\u5411\u5bf9\u8c61\u7f16\u7a0b\u7565\u6709\u533a\u522b\u3002\u5bfb\u627e\u5176\u6784\u5efa parole_gst \u5bf9\u8c61\u65f6\u7684\u65b9\u6cd5 parole_gst_constructed\uff0c\u5c06 video-sink \u5c5e\u6027\u8bbe\u7f6e\u4e3a\u524d\u6587\u5df2\u9a8c\u8bc1\u7684 glimagesink\uff0c\u8865\u4e01\uff1a"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://gist.github.com/Sakura286/26777ea8204c1819885e093806a4f7ca#file-parole-01-add-glimagesink-support-patch",children:"parole-01-add-glimagesink-support.patch"})}),"\n",(0,d.jsx)(n.p,{children:"\u81f3\u6b64\uff0c\u7c97\u7565\u7684\u9002\u914d\u5de5\u4f5c\u5b8c\u6210\u3002"}),"\n",(0,d.jsx)(n.h2,{id:"\u603b\u7ed3revyos-\u9002\u914d\u5de5\u4f5c",children:"\u603b\u7ed3\uff1aRevyOS \u9002\u914d\u5de5\u4f5c"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"\u7f16\u8bd1\u9a71\u52a8\u6a21\u5757\u81f3\u5185\u6838\uff0c\u8bbe\u7f6e\u542f\u52a8\u52a0\u8f7d\uff0c\u8bbe\u7f6e\u8bbe\u5907\u6743\u9650"}),"\n",(0,d.jsxs)(n.li,{children:["\u5c06 PTG \u63d0\u4f9b\u7684 omxil \u4e8c\u8fdb\u5236\u52a8\u6001\u5e93\u6587\u4ef6\u6253\u5305\u4e3a th1520-vpu","\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"\u4fee\u6539 th1520-vpu \u7684\u4f9d\u8d56\uff0c\u4f7f\u5176\u4f9d\u8d56 gst-omx \u3001libomxil-bellagio \u7b49\u5305"}),"\n",(0,d.jsx)(n.li,{children:"\u8bbe\u7f6e\u4e86\u4e00\u4e9b postinstall \u64cd\u4f5c\uff0c\u4f8b\u5982\u4f7f\u7528  omxregister-bellagio  \u6ce8\u518c\u7ec4\u4ef6\u7b49"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\u4fee\u6539 gst-omx","\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"\u589e\u52a0 config \u4e2d\u5bf9 vpu-omxil \u7ec4\u4ef6\u7684\u652f\u6301"}),"\n",(0,d.jsx)(n.li,{children:"\u5e94\u7528 dmabuf \u8865\u4e01"}),"\n",(0,d.jsx)(n.li,{children:"\u589e\u52a0\u5bf9 h265 vp9 \u7684\u652f\u6301"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.li,{children:"\u4fee\u6539 gst-base \u7f16\u8bd1\u65f6\u7684 gl \u652f\u6301\uff0c\u9650\u5236\u4e3a gles2+egl"}),"\n",(0,d.jsx)(n.li,{children:"\u4fee\u6539 parole \u4ee5\u652f\u6301 glimagesink"}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\u672c\u6587\u6240\u7528\u8d44\u6e90",children:"\u672c\u6587\u6240\u7528\u8d44\u6e90"}),"\n",(0,d.jsx)(n.p,{children:"\u8865\u4e01\u96c6\u5408\uff1a"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://gist.github.com/Sakura286/26777ea8204c1819885e093806a4f7ca",children:"https://gist.github.com/Sakura286/26777ea8204c1819885e093806a4f7ca"})}),"\n",(0,d.jsx)(n.p,{children:"PTG omxil \u5e93"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://drive.google.com/file/d/1pYgCVI7WltfpskltJ-RqzVUCEC21FS56",children:"https://drive.google.com/file/d/1pYgCVI7WltfpskltJ-RqzVUCEC21FS56"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var s=i(6540);const d={},l=s.createContext(d);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);